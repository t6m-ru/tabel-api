# Табель учета рабочего времени 

API клиент - инструмент для подготовки , расчета и формирования файла табеля Excel по ф.Т13.
<p>
    <a href="">
        <img src="https://img.shields.io/badge/version-1.0-brightgreen.svg?style=flat-square" alt="Version">
    </a>
</p>

## О проекте

- Эффективное использование времени при заполнении табеля. 
- Визуальное представление результатов расчета. 
- Сохранение результатов работы в локальном хранилище браузера.
- Формирование Excel файла табеля за месяц /за первую половину месяца .
- Использование API в Ваших проектах. 
- Возможность получения файла табеля путем выполнения запроса из командной строки.

###  Быстрый старт

- Скопируйте файлы на компьютер и откройте файл index.html в браузере.
- В поле ввода введите данные о работе сотрудника.
- Нажмите клавишу ESC для расчета табеля.
- Сохраните данные работы сотрудников в локальном хранилище.
- Выберите вид документа ,сформируйте  Excel файл табеля и скачайте его.
- Введите конфиденциальные данные списком в сформированный файл.
- Файл табеля полностью готов.


###  API

Файлы API клиента - это пример использования API (JavaScript). 

Дополнительно для удобства пользователя в примере выполнено :

- Сохранение и восстановление данных работы сотрудников за текущий месяц.
- Изменение и сохранение размеров рабочих окон.   
- Загрузка примеров заполнения табеля. 
- Просмотр справочника видов рабочего времени.

Вы можете использовать в Ваших программах обращаясь к API как описано далее :

## Примеры CURL запросов 

Для обращения к API необходимо сделать POST-запрос 
	
	curl "http://t6m.ru/api/" -H "Content-Type: application/x-www-form-urlencoded" -X POST 
	
c указанием параметров:

	access_token 	-токен
	ver=1.0		- версия API
	mode 		- Режим работы :
				0-Авторизация,
				1-Инициализация,
				2-Заполнение табеля,
				3-Табель за месяц,
				4-Табель за первую 1/2 месяца 
	m 		- рабочий месяц  
	cart		- данные о работе сотрудника	

Ответ вернётся в JSON.


## Примеры CURL запросов

### Авторизация

	curl "http://t6m.ru/api/" -H "Content-Type: application/x-www-form-urlencoded" -X POST \
	-d "access_token=a50a6fe31dcfc65942211faf7dd66cf27043f877" \
	-d "ver=1.0" \
	-d "mode=0" 

#### Ответ 

Параметр | Тип      | Варианты            |Описание 
---------|----------|---------------------|----------
info     | строка   | ОК ,Тестовый доступ | доступ к сервису

### Инициализация

	curl "http://t6m.ru/api/" -H "Content-Type: application/x-www-form-urlencoded" -X POST \
	-d "access_token=a50a6fe31dcfc65942211faf7dd66cf27043f877" \
	-d "ver=1.0" \
	-d "mode=1" 
#### Ответ 

Параметр | Тип      |  Описание 
---------|----------|--------------
samples  | массив   | примеры заполнения табеля 
docs     | массив   | доступные документы 
rv       | массив   | виды рабочего времени  


### Работа

	curl "http://t6m.ru/api/" -H "Content-Type: application/x-www-form-urlencoded" -X POST \
	-d "access_token=a50a6fe31dcfc65942211faf7dd66cf27043f877" \
	-d "ver=1.0" \
	-d "mode=2" \
	-d "m=1" \
   	--data-urlencode 'cart={"s":["1=/5"]}'

#### Ответ 

Параметр | Тип      |  Описание 
---------|----------|--------------
clnd     | строка   | календарь на месяц
calc     | массив   | итоги по сотрудникам
table    | массив   | данные для заполнения таблицы табеля  


### Табель ф.Т13 за месяц

	curl "http://t6m.ru/api/" \
	-H "Content-Type: application/x-www-form-urlencoded" \
	-X POST \
	-d "access_token=a50a6fe31dcfc65942211faf7dd66cf27043f877" \
	-d "ver=1.0" \
	-d "mode=3" \
	-d "m=10" \
	--data-urlencode 'cart={"s":["1=/5"]}'

#### Ответ 

  	Cсылка для скачивания файла : http://t6m.ru/api/Files/89f....37_Tabel_2019_10.xls

### Табель ф.Т13 за 1/2 месяца

	curl "http://t6m.ru/api/" \
	-H "Content-Type: application/x-www-form-urlencoded" \
	-X POST \
	-d "access_token=a50a6fe31dcfc65942211faf7dd66cf27043f877" \
	-d "ver=1.0" \
	-d "mode=4" \
	-d "m=10" \
	--data-urlencode 'cart={"s":["1=/5"]}'

#### Ответ 

	Ccылка для скачивания файла  : http://t6m.ru/api/Files/89f.....47_Tabel_2019_10_1_2_.xls



### Получить файл табеля Excel , используя только командную строку

Измените значения параметров   

	-d "mode=3"    3- Табель, 4-Табель за 1/2 месяца
	-d "m=10"     10 - Месяц
	--data-urlencode 'cart={"s":[ "1=/5 +1 10 ОТ","2=10 +1 10 У + 11 20 К","3=11 +1 10 ОТ","4=/6 + 12 20 К"]}' 

Выполните запрос  

	curl "http://t6m.ru/api/" -H "Content-Type: application/x-www-form-urlencoded" -X POST  \
	-d "access_token=a50a6fe31dcfc65942211faf7dd66cf27043f877" -d "ver=1.0" \
	-d "mode=3" \
	-d "m=10" \
	--data-urlencode 'cart={"s":[ "1=/5 +1 10 ОТ","2=10 +1 10 У + 11 20 К","3=11 +1 10 ОТ","4=/6 + 12 20 К"]}' \
	| sed 's/\"//g' \
	| curl -O `xargs echo -e`

##  Контакты , информация  

	Сайт:  http://www.t6m.ru
	Почта: mail@t6m.ru
    
##  Лицензия

MIT
